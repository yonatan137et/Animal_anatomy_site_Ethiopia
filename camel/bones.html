<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Camel Skeletal System Viewer</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    svg {
      width: 90%;
      max-width: 1200px;
      margin-top: 20px;
    }
    #infoBox {
      margin-top: 20px;
      padding: 10px 20px;
      border: 1px solid #ccc;
      background: #f9f9f9;
      width: 90%;
      max-width: 600px;
      text-align: left;
    }
    .highlight {
      fill: orange !important;
      stroke: red !important;
      stroke-width: 2px;
    }
    #regionSelector {
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h1>üê´ Camel Skeletal System Viewer</h1>
  <p>Click a bone or joint to view its name in English and Amharic.</p>

  <select id="regionSelector">
    <option value="all">All Regions</option>
    <option value="skull">üß† Skull</option>
    <option value="vertebral_column">ü¶¥ Vertebral Column</option>
    <option value="thoracic_cage">ü´Å Thoracic Cage</option>
    <option value="forelimb">ü¶µ Forelimb</option>
    <option value="hindlimb">ü¶µ Hindlimb</option>
    <option value="joints">ü¶ø Joints</option>
  </select>

  <!-- Embed your SVG -->
  <object id="boneSVG" type="image/svg+xml" data="bones.svg"></object>

  <div id="infoBox">Click a bone or joint to see details.</div>

  <script>
    let boneData = {};

    fetch('bones.json')
      .then(response => response.json())
      .then(data => {
        boneData = data;
        setupListeners();
      });

    function setupListeners() {
      const svgObject = document.getElementById('boneSVG');
      svgObject.addEventListener('load', () => {
        const svgDoc = svgObject.contentDocument;
        for (const region in boneData) {
          for (const id in boneData[region]) {
            const bone = svgDoc.getElementById(id);
            if (bone) {
              bone.style.cursor = 'pointer';
              bone.setAttribute('data-region', region);
              bone.addEventListener('click', () => showInfo(id, bone));
            }
          }
        }

        document.getElementById('regionSelector').addEventListener('change', filterRegions);
      });
    }

    function showInfo(id, element) {
      const region = element.getAttribute('data-region');
      const data = boneData[region][id];
      document.querySelectorAll('.highlight').forEach(el => el.classList.remove('highlight'));
      element.classList.add('highlight');

      const en = data.en || id;
      const am = data.am || '';

      document.getElementById('infoBox').innerHTML = `
        <strong>${en}</strong> (${am})
      `;
    }

    function filterRegions() {
      const selected = document.getElementById('regionSelector').value;
      const svgDoc = document.getElementById('boneSVG').contentDocument;
      if (!svgDoc) return;

      for (const region in boneData) {
        for (const id in boneData[region]) {
          const bone = svgDoc.getElementById(id);
          if (bone) {
            bone.style.display = (selected === 'all' || region === selected) ? 'inline' : 'none';
          }
        }
      }

      document.getElementById('infoBox').innerHTML = "Click a bone or joint to see details.";
    }
  </script>

</body>
</html>
