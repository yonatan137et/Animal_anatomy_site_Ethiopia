<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chicken Anatomy Viewer</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 { margin-bottom: 10px; }
    object {
      width: 90%;
      max-width: 1200px;
      border: 1px solid #ccc;
      background: #fff;
    }
    #infoBox {
      margin-top: 20px;
      padding: 10px 20px;
      border: 1px solid #ccc;
      background: #fff;
      width: 90%;
      max-width: 600px;
      text-align: left;
    }
    #regionSelector {
      margin: 20px 0;
      padding: 5px;
    }
    .highlight {
      fill: orange !important;
      stroke: red !important;
      stroke-width: 2px;
    }
  </style>
</head>
<body>

  <h1>ğŸ” Chicken Anatomy Viewer</h1>
  <p>Select a region and click on a structure to view its name in English and Amharic.</p>

  <select id="regionSelector">
    <option value="all">All Regions</option>
    <optgroup label="ğŸ¦´ Skeletal System">
      <option value="skull">ğŸ§  Skull</option>
      <option value="vertebral_column">ğŸ¦´ Vertebral Column</option>
      <option value="thoracic_cage">ğŸ« Thoracic Cage</option>
      <option value="forelimb">ğŸ¦µ Forelimb (Wing)</option>
      <option value="hindlimb">ğŸ¦µ Hindlimb</option>
    </optgroup>
    <optgroup label="ğŸ’ª Muscular System">
      <option value="head_neck">ğŸ§  Head & Neck Muscles</option>
      <option value="thoracic">ğŸ« Thoracic Muscles</option>
      <option value="wing">ğŸ¦µ Wing Muscles</option>
      <option value="hindlimb_muscles">ğŸ¦µ Hindlimb Muscles</option>
      <option value="abdominal">ğŸ§ Abdominal Muscles</option>
      <option value="tail_perineal">ğŸ” Tail & Perineal Muscles</option>
    </optgroup>
    <optgroup label="ğŸ§« Visceral Systems">
      <option value="nervous_system">ğŸ§  Nervous System</option>
      <option value="sensory_organs">ğŸ‘ï¸ Sensory Organs</option>
      <option value="respiratory_system">ğŸ« Respiratory System</option>
      <option value="cardiovascular_system">â¤ï¸ Cardiovascular System</option>
      <option value="endocrine_system">ğŸ§  Endocrine System</option>
      <option value="digestive_system">ğŸ§ª Digestive System</option>
      <option value="urinary_system">ğŸ§« Urinary System</option>
      <option value="reproductive_male">ğŸ§¬ Reproductive System (Male)</option>
      <option value="reproductive_female">ğŸ§¬ Reproductive System (Female)</option>
      <option value="body_cavities">ğŸ§ Body Cavities</option>
    </optgroup>
  </select>

  <object id="chickenSVG" type="image/svg+xml" data="chicken.svg"></object>

  <div id="infoBox">Click a structure to see details.</div>

  <script>
    let boneData = {}, muscleData = {}, organData = {};

    Promise.all([
      fetch('chicken.json').then(r => r.json()),
      fetch('muscles.json').then(r => r.json()),
      fetch('organs.json').then(r => r.json())
    ]).then(([bones, muscles, organs]) => {
      boneData = bones;
      muscleData = muscles;
      organData = organs;
      setupViewer();
    });

    function setupViewer() {
      const obj = document.getElementById('chickenSVG');
      obj.addEventListener('load', () => {
        const svgDoc = obj.contentDocument;
        const allData = { ...boneData, ...muscleData, ...organData };

        for (const region in allData) {
          for (const id in allData[region]) {
            const el = svgDoc.getElementById(id);
            if (el) {
              el.style.cursor = 'pointer';
              el.setAttribute('data-region', region);
              el.addEventListener('click', () => {
                highlight(el, svgDoc);
                const name = allData[region][id];
                document.getElementById('infoBox').innerHTML =
                  `<strong>English:</strong> ${name.en}<br><strong>Amharic:</strong> ${name.am}`;
              });
            }
          }
        }

        document.getElementById('regionSelector').addEventListener('change', e => {
          const selected = e.target.value;
          for (const region in allData) {
            for (const id in allData[region]) {
              const el = svgDoc.getElementById(id);
              if (el) {
                el.style.display = (selected === 'all' || selected === region) ? 'inline' : 'none';
              }
            }
          }
        });
      });
    }

    function highlight(el, svgDoc) {
      svgDoc.querySelectorAll('.highlight').forEach(e => e.classList.remove('highlight'));
      el.classList.add('highlight');
    }
  </script>

</body>
</html>
